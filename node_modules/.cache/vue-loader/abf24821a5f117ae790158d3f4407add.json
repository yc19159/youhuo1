{"remainingRequest":"D:\\11.27\\youhuo1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\11.27\\youhuo1\\src\\views\\Good.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\11.27\\youhuo1\\src\\views\\Good.vue","mtime":1574148250302},{"path":"D:\\11.27\\youhuo1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\11.27\\youhuo1\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\11.27\\youhuo1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\11.27\\youhuo1\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\n// console.log(sessionStorage.username)\r\nimport Head from '@/components/Head.vue'\r\nimport {mapState,mapMutations} from \"vuex\"\r\nimport { Dialog } from 'vant';\r\nvar username=sessionStorage.username;\r\nexport default {\r\n    data(){\r\n        return{\r\n            value:1,\r\n            detail:{},\r\n            isActiveIndex: -1,\r\n            isActiveIndexSize:-1,\r\n            isActiveIndexDay:-1,\r\n            color:\"\",\r\n            size: \"\",\r\n            goodsStock:[],\r\n            stockId:\"\",\r\n            daysId: \"\",\r\n            price:\"\",\r\n            morenPrice:\"\",\r\n            totalPrice:\"\",\r\n            rentAndPrice:[],\r\n        }\r\n    },\r\n    components:{\r\n       Head,\r\n    },\r\n    computed: {\r\n      ...mapState(['searchShow']),\r\n    },\r\n    methods: {\r\n        ...mapMutations(['changeSearch']),\r\n        choose(){\r\n document.getElementsByClassName('goods-right-picker')[0].style.display=\"block\";\r\n        },\r\n      \r\n        close(){\r\n   document.getElementsByClassName('goods-right-picker')[0].style.display=\"none\";\r\n        },\r\n         confirm(){\r\n              // var count=this.value\r\n              sessionStorage.count=this.value;\r\n              this.goodsStock=this.detail.productList\r\n              console.log(this.goodsStock)\r\n              document.getElementsByClassName('goods-right-picker')[0].style.display=\"none\";\r\n              sessionStorage.stockId=this.stockId;\r\n              sessionStorage.size=this.size;\r\n              sessionStorage.color=this.color;\r\n       \r\n        \r\n         if(this.detail.specificationList[1]){\r\n            if(!this.color||!this.size){\r\n               Dialog({message:'请选择颜色或规格'})\r\n            \r\n            }else{\r\n               this.$axios.get('/order/goPay',{params:{\r\n                 userId:localStorage.token,\r\n                 id:this.$route.params.goodId,\r\n                 productId:this.stockId,\r\n                 rentId:this.daysId,\r\n                 number:this.value,\r\n               }}).then(res=>{\r\n                 console.log(res)\r\n                 this.totalPrice=res.data.data.totalPrice;\r\n                 sessionStorage.totalPrice=this.totalPrice;\r\n                 sessionStorage.price=res.data.data.price;\r\n                 this.$router.push({name:'jiesuan',params:{goodId:this.$route.params.goodId}})\r\n               })\r\n              // location.href=\"/#/jiesuan/\"+this.$route.params.goodId\r\n              \r\n            }\r\n         }else{\r\n           if(!this.size){\r\n              Dialog({message:'请选择规格'})\r\n           }else{\r\n              this.$axios.get('/order/goPay',{params:{\r\n                 userId:localStorage.token,\r\n                 id:this.$route.params.goodId,\r\n                 productId:this.stockId,\r\n                 rentId:this.daysId,\r\n                 number:this.value,\r\n               }}).then(res=>{\r\n                 console.log(res)\r\n                 this.totalPrice=res.data.data.totalPrice;\r\n                 sessionStorage.totalPrice=this.totalPrice;\r\n                 sessionStorage.price=res.data.data.price;\r\n                this.$router.push({name:'jiesuan',params:{goodId:this.$route.params.goodId}})\r\n               })\r\n                \r\n           }\r\n         }\r\n          },\r\n          // 选择尺寸的同时判断是否存在库存\r\n       chooseColor(index){\r\n           \r\n         this.color=this.$refs.chooseColor[index].innerHTML;\r\n          this.goodsStock=this.detail.productList\r\n          // console.log( this.color)\r\n          // console.log(this.goodsStock)\r\n          for(var i=0; i<this.goodsStock.length;i++){\r\n            this.goodsStock[i].specifications.join('');\r\n            console.log(this.goodsStock[i].specifications.join('').indexOf(this.color))\r\n            if(this.goodsStock[i].specifications.join('').indexOf(this.color)!=\"-1\"){\r\n             \r\n                if(this.size){\r\n                  if(this.goodsStock[i].specifications.join('').indexOf(this.size+this.color)!=\"-1\"){\r\n                     console.log(this.goodsStock[i])\r\n                      if(this.goodsStock[i].number>0){\r\n                         this.isActiveIndex = index;\r\n                        console.log('有库存');\r\n                        this.stockId=this.goodsStock[i].id\r\n                        console.log(this.stockId);\r\n                      }else{\r\n                         Dialog({message:'此商品已没有库存'})\r\n                      }\r\n                  }\r\n                }else{\r\n                   console.log(this.goodsStock[i])\r\n                  this.isActiveIndex = index;\r\n                   this.stockId=this.goodsStock[i].id\r\n                }\r\n            }\r\n          }\r\n       },\r\n      //  判断库存\r\n       chooseSize(index){\r\n          \r\n        this.size=this.$refs.size[index].innerHTML;\r\n         console.log( this.size)\r\n          this.goodsStock=this.detail.productList\r\n          // console.log(this.goodsStock)\r\n          for(var i=0; i<this.goodsStock.length;i++){\r\n            this.goodsStock[i].specifications.join('');\r\n            console.log(this.goodsStock[i].specifications.join('').indexOf(this.color))\r\n            if(this.goodsStock[i].specifications.join('').indexOf(this.size)!=\"-1\"){\r\n              // console.log(this.goodsStock[i])\r\n              if(this.color){\r\n                if(this.goodsStock[i].specifications.join('').indexOf(this.size+this.color)!=\"-1\"){\r\n                     \r\n                        console.log(this.goodsStock[i])\r\n                        if(this.goodsStock[i].number>0){\r\n                          this.isActiveIndexSize = index;\r\n                          console.log('有库存');\r\n                          this.stockId=this.goodsStock[i].id;\r\n                          console.log(this.stockId);\r\n                        }else{\r\n                           Dialog({message:'此商品已没有库存'})\r\n                        }\r\n                }\r\n\r\n              }else{\r\n                if(this.goodsStock[i].number>0){\r\n                  this.isActiveIndexSize = index;\r\n                   this.stockId=this.goodsStock[i].id;\r\n                }else{\r\n                   Dialog({message:'此商品已没有库存'})\r\n                }\r\n                 console.log(this.stockId)\r\n              }\r\n            }\r\n          }\r\n       },\r\n       chooseDay(index){\r\n         this.isActiveIndexDay=index;\r\n         this.daysId=this.detail.rentAndPrice[index].id;\r\n         sessionStorage.rentId=this.daysId;\r\n         this.price=this.detail.rentAndPrice[index].rentMoney;\r\n         console.log(this.daysId);\r\n       },\r\n        paynow(){\r\n      //判断是否有颜色及规格\r\n     \r\n       document.getElementsByClassName('goods-right-picker')[0].style.display=\"block\";\r\n        },\r\n        collectGoods(){\r\n           this.$axios.post('/collect/addordelete',{\r\n             userId: localStorage.token,\r\n             valueId: this.$route.params.goodId,\r\n             type:0,\r\n           }).then(res=>{\r\n             console.log(res)\r\n           })\r\n        },\r\n        toShop(){\r\n          this.$router.push({name: 'dianpu',params:{shopId:this.detail.info.shopId} })\r\n        }\r\n      \r\n    },\r\n    mounted(){\r\n//        this.changeSearch(false);\r\n//        document.onclick=function(e){\r\n//        var event=e||event;\r\n//        var target=event.targrt||event.srcElement;\r\n//        if(target.className!=='detail'&&target.className=='goods-right-picker'){\r\n//  document.getElementsByClassName('goods-right-picker')[0].style.display=\"none\"; \r\n//       }\r\n//        };\r\n     console.log(this.$route.params.goodId)\r\n        this.$axios.get('/goods/detail',{\r\n        params:{id:this.$route.params.goodId,\r\n               userId: localStorage.token}\r\n        }).then(res=>{\r\n          this.detail=res.data.data\r\n          console.log(res.data.data.rentAndPrice)\r\n          this.morenPrice=this.detail.rentAndPrice[0].rentMoney;\r\n          \r\n          \r\n        })\r\n  //       this.$axios.post(\"/vue/getShopcarInfo\",{\r\n  //     username:sessionStorage.username,\r\n  // }).then(res=>{\r\n      // this.total = res.data.total;\r\n    //  this.getTotal(res.data.total)\r\n  // })\r\n      \r\n    },\r\n   \r\n}\r\n",{"version":3,"sources":["Good.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"Good.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div class=\"main\">\r\n         <Head></Head>\r\n         <div class=\"item\">\r\n           <van-swipe  indicator-color=\"white\">\r\n             <van-swipe-item><img :src=\"detail.info.gallery[0]\" alt=\"\" class=\"item-img\"></van-swipe-item>\r\n             <van-swipe-item><img :src=\"detail.info.gallery[1]\" alt=\"\" class=\"item-img\"></van-swipe-item>\r\n             <van-swipe-item><img :src=\"detail.info.gallery[2]\" alt=\"\" class=\"item-img\"></van-swipe-item>\r\n            \r\n</van-swipe>\r\n            \r\n        </div>\r\n       <div class=\"descript\">\r\n          <div class=\"descript-content\">\r\n               <div class=\"item-price\">\r\n                 <span class=\"price-span\">￥<span :style=\"{'font-size':'0.2rem'}\">{{detail.info.retailPrice.toFixed(2)}}</span>/天</span>   \r\n                 <span class=\"quanxin\" :style=\"{color:'white','font-size':'0.13rem','line-height':'0.16rem',height:'0.16rem',\r\n          'margin-left':'0.12rem','border-radius':'0.02rem',width:'0.32rem',\r\n          'text-align':'center','margin-top':'0.05rem','font-weight':'normal',display:'block',float:'left'}\" >全新</span>\r\n           <span class=\"halfyear\"> 半年起租</span>\r\n               </div>\r\n               <p class=\"item-phone\">{{detail.info.name}}</p>\r\n               <div class=\"sell\">\r\n                 <p class=\"sell-number\">\r\n                   销量：{{detail.info.number}}件\r\n                 </p>\r\n                 <p class=\"heiger-yajin\">\r\n                   最高押金：￥5000\r\n                 </p>\r\n               </div>\r\n               <div class=\"openMember\">\r\n                <span class=\"sp-first\">开通会员下单预计可得 <span class=\"orange\">200</span> 积分</span>\r\n                <img src=\"../assets/image/more.png\" class=\"more\" alt=\"\">\r\n                <span class=\"sp-third\">立即开通</span>\r\n                \r\n               </div>\r\n               <div class=\"descript-bottom\">\r\n                 <img src=\"../assets/image/good_gou.png\" class=\"gouImg\" alt=\"\">\r\n                 <span class=\"sp1\">免押金</span>\r\n                 <img src=\"../assets/image/good_gou.png\" class=\"gouImg gouImg2\" alt=\"\">\r\n                 <span class=\"sp2\">可续租</span>\r\n                 <img src=\"../assets/image/more.png\" class=\"more more2\" alt=\"\">\r\n               </div>\r\n          </div>\r\n       </div>\r\n       <!-- <div class=\"descript-sec\">\r\n           <div class=\"descript-sec-content\">\r\n                 <div class=\"descript-sec-taocan\">\r\n                   <p :style=\"{'font-size':'0.14rem','font-family':'NSimSun','font-weight':'bold',\r\n                   float:'left'}\">套餐</p>\r\n                   <p :style=\"{width:'2.9rem',float:'right',height:'0.53rem',\r\n                  'box-sizing':'border-box','border-bottom':'1px solid #F5F6FA',\r\n                  'font-size':'0.13rem',color:'#2F3031'}\">{IphoneX s64 全新无锁一年起租起租}\r\n                  <img src=\"../assets/image/more.png\" class=\"more\" alt=\"\"></p>\r\n                  \r\n                 </div>\r\n                 <div class=\"descript-sec-maiduan\">\r\n                 <p :style=\"{'font-size':'0.14rem','font-weight':'bold',\r\n                 float:'left'}\">\r\n                   买断\r\n                 </p>\r\n                 <p :style=\"{width:'2.9rem',float:'right',height:'0.53rem',\r\n                  'box-sizing':'border-box','border-bottom':'1px solid #F5F6FA',\r\n                  'font-size':'0.13rem',color:'#2F3031'}\">可<span :style=\"{color:'#D13717',\r\n                  'font-size':'0.14rem'}\"> ￥7999.00 </span>买断\r\n                   <img src=\"../assets/image/more.png\" class=\"more\" alt=\"\"></p>\r\n                 </div>\r\n           </div>\r\n       </div> -->\r\n        <div class=\"descript-third\">\r\n           <div class=\"descript-third-content\">\r\n                 <div class=\"descript-third-choose\">\r\n                   <p :style=\"{'font-size':'0.14rem','font-family':'NSimSun','font-weight':'bold',\r\n                   float:'left'}\">选择</p>\r\n                   <p :style=\"{width:'2.9rem',float:'right',height:'0.53rem',\r\n                  'box-sizing':'border-box','border-bottom':'1px solid #F5F6FA',\r\n                  'font-size':'0.13rem',color:'#2F3031'}\" @click=\"choose\">点击选择颜色，型号，\r\n                  <img src=\"../assets/image/more.png\" class=\"more\" alt=\"\"></p>\r\n                  \r\n                 </div>\r\n                 <div class=\"descript-third-canshu\">\r\n                 <p :style=\"{'font-size':'0.14rem','font-family':'NSimSun','font-weight':'bold',\r\n                   float:'left'}\">\r\n                   参数\r\n                 </p>\r\n                 <p :style=\"{width:'2.9rem',float:'right',height:'0.53rem',\r\n                  'box-sizing':'border-box','border-bottom':'1px solid #F5F6FA',\r\n                  'font-size':'0.13rem',color:'#2F3031'}\"  @click=\"choose\">网络类型，品牌...\r\n                   <img src=\"../assets/image/more.png\" class=\"more\" alt=\"\"></p>\r\n                 </div>\r\n           </div>\r\n       </div>\r\n       <div class=\"bg_bottom\">\r\n          <div class=\"bottom\">\r\n            <p class=\"bottom-title\">商品详情</p>\r\n            <img src=\"../assets/image/good_zhouqi.png\" alt=\"\">\r\n             <img src=\"../assets/image/good_liucheng.png\" alt=\"\">\r\n              <img src=\"../assets/image/good_xuzu.png\" alt=\"\">\r\n               <img src=\"../assets/image/good_maiduan.png\" alt=\"\">\r\n                <img src=\"../assets/image/good_guihuan.png\" alt=\"\">\r\n          </div>\r\n       </div>\r\n \r\n        <van-goods-action >\r\n  <van-goods-action-icon icon=\"shop-o\" text=\"店铺\" @click=\"toShop\"/>\r\n  <van-goods-action-icon icon=\"chat-o\" text=\"客服\"  />\r\n  <van-goods-action-icon icon=\"star-o\" text=\"收藏\"  @click=\"collectGoods\"/>\r\n\r\n  <van-goods-action-button type=\"danger\" text=\"立即租\"   @click=\"paynow\" />\r\n</van-goods-action>\r\n\r\n\r\n    <div class=\"goods-right-picker\">\r\n       <div class=\"detail\">\r\n          <div class=\"detail-content\">\r\n            <div class=\"d-content-top\">\r\n                  <img :src=\"detail.info.picUrl\" alt=\"\">\r\n                    <span class=\"price-span\">￥\r\n                      <span v-if=\"price\" :style=\"{'font-size':'0.2rem'}\">{{price}}</span>\r\n                       <span v-else :style=\"{'font-size':'0.2rem'}\">{{morenPrice}}</span>\r\n\r\n                      /天</span>   \r\n                 <span class=\"quanxin\" :style=\"{color:'white','font-size':'0.13rem','line-height':'0.16rem',height:'0.16rem',\r\n          'margin-left':'0.12rem','border-radius':'0.02rem',width:'0.32rem',\r\n          'text-align':'center','margin-top':'0.05rem','font-weight':'normal',display:'block',float:'left'\r\n        ,'margin-top':'0.75rem'}\">全新</span>\r\n            </div>\r\n            <div class=\"d-content-color\" v-if=\"this.detail.specificationList[1]\">\r\n                <p>颜色</p>\r\n                <ul>\r\n                  <li class=\"color-li\" v-for=\"(item , i) in this.detail.specificationList[1].valueList\" \r\n                  :key=\"i\" @click=\"chooseColor(i)\" :class=\"{active: isActiveIndex === i}\" ref=\"chooseColor\">{{item.value}}</li> \r\n                  \r\n                </ul>\r\n            </div>\r\n              <div class=\"d-content-spec\">\r\n                <p>规格</p>\r\n                <ul>\r\n                  <li class=\"spec-li\" v-for=\"(item , i) in this.detail.specificationList[0].valueList\" \r\n                  :key=\"i\"  @click=\"chooseSize(i)\" :class=\"{activeSize: isActiveIndexSize === i}\" ref=\"size\" >{{item.value}}</li> \r\n                  \r\n                </ul>\r\n            </div>\r\n              <div class=\"d-content-day\">\r\n                <p>租用天数</p>\r\n                <ul>\r\n                  <li class=\"day-li\" v-for=\"(item , i) in this.detail.rentAndPrice\" :key=\"i\"\r\n                  @click=\"chooseDay(i)\" :class=\"{active: isActiveIndexDay === i}\">{{item.rentTime}}天</li> \r\n               \r\n                </ul>\r\n            </div>\r\n           \r\n             <div class=\"d-content-num\">\r\n                <p>数量</p>\r\n                <van-stepper v-model=\"value\" />\r\n            </div>\r\n             <div class=\"d-content-sure\" @click=\"confirm\">\r\n               确定\r\n            </div>\r\n          </div>\r\n       </div>\r\n    </div>\r\n   \r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n// console.log(sessionStorage.username)\r\nimport Head from '@/components/Head.vue'\r\nimport {mapState,mapMutations} from \"vuex\"\r\nimport { Dialog } from 'vant';\r\nvar username=sessionStorage.username;\r\nexport default {\r\n    data(){\r\n        return{\r\n            value:1,\r\n            detail:{},\r\n            isActiveIndex: -1,\r\n            isActiveIndexSize:-1,\r\n            isActiveIndexDay:-1,\r\n            color:\"\",\r\n            size: \"\",\r\n            goodsStock:[],\r\n            stockId:\"\",\r\n            daysId: \"\",\r\n            price:\"\",\r\n            morenPrice:\"\",\r\n            totalPrice:\"\",\r\n            rentAndPrice:[],\r\n        }\r\n    },\r\n    components:{\r\n       Head,\r\n    },\r\n    computed: {\r\n      ...mapState(['searchShow']),\r\n    },\r\n    methods: {\r\n        ...mapMutations(['changeSearch']),\r\n        choose(){\r\n document.getElementsByClassName('goods-right-picker')[0].style.display=\"block\";\r\n        },\r\n      \r\n        close(){\r\n   document.getElementsByClassName('goods-right-picker')[0].style.display=\"none\";\r\n        },\r\n         confirm(){\r\n              // var count=this.value\r\n              sessionStorage.count=this.value;\r\n              this.goodsStock=this.detail.productList\r\n              console.log(this.goodsStock)\r\n              document.getElementsByClassName('goods-right-picker')[0].style.display=\"none\";\r\n              sessionStorage.stockId=this.stockId;\r\n              sessionStorage.size=this.size;\r\n              sessionStorage.color=this.color;\r\n       \r\n        \r\n         if(this.detail.specificationList[1]){\r\n            if(!this.color||!this.size){\r\n               Dialog({message:'请选择颜色或规格'})\r\n            \r\n            }else{\r\n               this.$axios.get('/order/goPay',{params:{\r\n                 userId:localStorage.token,\r\n                 id:this.$route.params.goodId,\r\n                 productId:this.stockId,\r\n                 rentId:this.daysId,\r\n                 number:this.value,\r\n               }}).then(res=>{\r\n                 console.log(res)\r\n                 this.totalPrice=res.data.data.totalPrice;\r\n                 sessionStorage.totalPrice=this.totalPrice;\r\n                 sessionStorage.price=res.data.data.price;\r\n                 this.$router.push({name:'jiesuan',params:{goodId:this.$route.params.goodId}})\r\n               })\r\n              // location.href=\"/#/jiesuan/\"+this.$route.params.goodId\r\n              \r\n            }\r\n         }else{\r\n           if(!this.size){\r\n              Dialog({message:'请选择规格'})\r\n           }else{\r\n              this.$axios.get('/order/goPay',{params:{\r\n                 userId:localStorage.token,\r\n                 id:this.$route.params.goodId,\r\n                 productId:this.stockId,\r\n                 rentId:this.daysId,\r\n                 number:this.value,\r\n               }}).then(res=>{\r\n                 console.log(res)\r\n                 this.totalPrice=res.data.data.totalPrice;\r\n                 sessionStorage.totalPrice=this.totalPrice;\r\n                 sessionStorage.price=res.data.data.price;\r\n                this.$router.push({name:'jiesuan',params:{goodId:this.$route.params.goodId}})\r\n               })\r\n                \r\n           }\r\n         }\r\n          },\r\n          // 选择尺寸的同时判断是否存在库存\r\n       chooseColor(index){\r\n           \r\n         this.color=this.$refs.chooseColor[index].innerHTML;\r\n          this.goodsStock=this.detail.productList\r\n          // console.log( this.color)\r\n          // console.log(this.goodsStock)\r\n          for(var i=0; i<this.goodsStock.length;i++){\r\n            this.goodsStock[i].specifications.join('');\r\n            console.log(this.goodsStock[i].specifications.join('').indexOf(this.color))\r\n            if(this.goodsStock[i].specifications.join('').indexOf(this.color)!=\"-1\"){\r\n             \r\n                if(this.size){\r\n                  if(this.goodsStock[i].specifications.join('').indexOf(this.size+this.color)!=\"-1\"){\r\n                     console.log(this.goodsStock[i])\r\n                      if(this.goodsStock[i].number>0){\r\n                         this.isActiveIndex = index;\r\n                        console.log('有库存');\r\n                        this.stockId=this.goodsStock[i].id\r\n                        console.log(this.stockId);\r\n                      }else{\r\n                         Dialog({message:'此商品已没有库存'})\r\n                      }\r\n                  }\r\n                }else{\r\n                   console.log(this.goodsStock[i])\r\n                  this.isActiveIndex = index;\r\n                   this.stockId=this.goodsStock[i].id\r\n                }\r\n            }\r\n          }\r\n       },\r\n      //  判断库存\r\n       chooseSize(index){\r\n          \r\n        this.size=this.$refs.size[index].innerHTML;\r\n         console.log( this.size)\r\n          this.goodsStock=this.detail.productList\r\n          // console.log(this.goodsStock)\r\n          for(var i=0; i<this.goodsStock.length;i++){\r\n            this.goodsStock[i].specifications.join('');\r\n            console.log(this.goodsStock[i].specifications.join('').indexOf(this.color))\r\n            if(this.goodsStock[i].specifications.join('').indexOf(this.size)!=\"-1\"){\r\n              // console.log(this.goodsStock[i])\r\n              if(this.color){\r\n                if(this.goodsStock[i].specifications.join('').indexOf(this.size+this.color)!=\"-1\"){\r\n                     \r\n                        console.log(this.goodsStock[i])\r\n                        if(this.goodsStock[i].number>0){\r\n                          this.isActiveIndexSize = index;\r\n                          console.log('有库存');\r\n                          this.stockId=this.goodsStock[i].id;\r\n                          console.log(this.stockId);\r\n                        }else{\r\n                           Dialog({message:'此商品已没有库存'})\r\n                        }\r\n                }\r\n\r\n              }else{\r\n                if(this.goodsStock[i].number>0){\r\n                  this.isActiveIndexSize = index;\r\n                   this.stockId=this.goodsStock[i].id;\r\n                }else{\r\n                   Dialog({message:'此商品已没有库存'})\r\n                }\r\n                 console.log(this.stockId)\r\n              }\r\n            }\r\n          }\r\n       },\r\n       chooseDay(index){\r\n         this.isActiveIndexDay=index;\r\n         this.daysId=this.detail.rentAndPrice[index].id;\r\n         sessionStorage.rentId=this.daysId;\r\n         this.price=this.detail.rentAndPrice[index].rentMoney;\r\n         console.log(this.daysId);\r\n       },\r\n        paynow(){\r\n      //判断是否有颜色及规格\r\n     \r\n       document.getElementsByClassName('goods-right-picker')[0].style.display=\"block\";\r\n        },\r\n        collectGoods(){\r\n           this.$axios.post('/collect/addordelete',{\r\n             userId: localStorage.token,\r\n             valueId: this.$route.params.goodId,\r\n             type:0,\r\n           }).then(res=>{\r\n             console.log(res)\r\n           })\r\n        },\r\n        toShop(){\r\n          this.$router.push({name: 'dianpu',params:{shopId:this.detail.info.shopId} })\r\n        }\r\n      \r\n    },\r\n    mounted(){\r\n//        this.changeSearch(false);\r\n//        document.onclick=function(e){\r\n//        var event=e||event;\r\n//        var target=event.targrt||event.srcElement;\r\n//        if(target.className!=='detail'&&target.className=='goods-right-picker'){\r\n//  document.getElementsByClassName('goods-right-picker')[0].style.display=\"none\"; \r\n//       }\r\n//        };\r\n     console.log(this.$route.params.goodId)\r\n        this.$axios.get('/goods/detail',{\r\n        params:{id:this.$route.params.goodId,\r\n               userId: localStorage.token}\r\n        }).then(res=>{\r\n          this.detail=res.data.data\r\n          console.log(res.data.data.rentAndPrice)\r\n          this.morenPrice=this.detail.rentAndPrice[0].rentMoney;\r\n          \r\n          \r\n        })\r\n  //       this.$axios.post(\"/vue/getShopcarInfo\",{\r\n  //     username:sessionStorage.username,\r\n  // }).then(res=>{\r\n      // this.total = res.data.total;\r\n    //  this.getTotal(res.data.total)\r\n  // })\r\n      \r\n    },\r\n   \r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n\r\n.main{\r\n  width: 100%;\r\n  height:auto;\r\n  background-color: #F5F6FA;\r\n}\r\n.van-search {\r\n  display: none !important;\r\n  box-sizing: border-box;\r\n}\r\n.item{\r\n  width: 100%;\r\n height: 3.5rem;\r\n overflow: hidden;\r\n background: -webkit-linear-gradient(to bottom, white, #F5F6FA) !important;\r\n    background: -o-linear-gradient(to bottom, white, #F5F6FA) !important;\r\n    background: -moz-linear-gradient(to bottom, white, #F5F6FA) !important;\r\n    background: linear-gradient(to bottom, white, #F5F6FA) !important;\r\n}\r\n.item-img {\r\n width: 3.5rem;\r\n height: 2.64rem;\r\n margin: auto;\r\nmargin-top: 0.43rem\r\n}\r\n.descript{\r\nwidth: 100%;\r\nheight: 2.21rem;\r\nbackground-color: white;\r\nborder-radius: 0.2rem;\r\noverflow: hidden;\r\n }\r\n.descript-content{\r\nwidth: 3.34rem;\r\nheight: 1.95rem;\r\nmargin: auto;\r\nmargin-top: 0.22rem;\r\noverflow: hidden;\r\n }\r\n .item-price{\r\n   height: 0.25rem;\r\n }\r\n .item-price .price-span{\r\n   display: block;\r\n   float: left;\r\n    font-size: 0.15rem;\r\n    font-family: 'DIN-Bold';\r\n    color: #B3381D;\r\n    font-weight: bold;\r\n }\r\n .item-price .quanxin{\r\n   background: -webkit-linear-gradient(to left, #D50000, #FD9A28) !important;\r\n    background: -o-linear-gradient(to left, #D50000, #FD9A28) !important;\r\n    background: -moz-linear-gradient(to left, #D50000, #FD9A28) !important;\r\n    background: linear-gradient(to left, #D50000, #FD9A28) !important;\r\n }\r\n .item-price .halfyear{\r\n   display: block;\r\n   float: right;\r\n   color: #C7C7C7;\r\n   font-size: 0.12rem;\r\n   line-height: 0.32rem;\r\n }\r\n .item-phone{\r\n   margin-top: 0.1rem;\r\n   font-size: 0.17rem;\r\n   line-height: 0.24rem;\r\n   font-family: 'NSimSun';\r\n  //  font-family: '微软雅黑';\r\n   font-weight: bold;\r\n }\r\n .sell{\r\n   width: 100%;\r\n    height: 0.2rem;\r\n    margin-top: 0.1rem;\r\n   .sell-number{\r\n     color: #C7C7C7;\r\n     float: left;\r\n     font-size: 0.12rem;\r\n   }\r\n   .heiger-yajin{\r\n      color: #C7C7C7;\r\n     float: right;\r\n     font-size: 0.12rem;\r\n   }\r\n }\r\n\r\n .openMember{\r\n   width: 100%;\r\n   height: 0.3rem;\r\n   background: #EAF5FD;\r\n   margin-top: 0.1rem;\r\n   border-radius: 0.06rem;\r\n   span{\r\n     font-size: 0.12rem;\r\n     line-height: 0.3rem;\r\n     color: #5E6165;\r\n   }\r\n   .sp-first{\r\n    margin-left: 0.12rem;\r\n   }\r\n   .orange{\r\n     color: #E2A15E;\r\n   }\r\n   .more{\r\n     float: right;\r\n\r\n     margin-top: 0.1rem;\r\n     margin-right: 0.1rem;\r\n   }\r\n   .sp-third{\r\n     float: right;\r\n     margin-right: 0.1rem;\r\n    \r\n   }\r\n }\r\n .descript-bottom{\r\n   height: 0.12rem;\r\n   margin-top: 0.1rem;\r\n     span{\r\n       float: left;\r\n       font-size: 0.12rem;\r\n       margin-left: 0.05rem;\r\n       color: #C7C7C7;\r\n     }\r\n     .sp2{\r\n       margin-left: 0;\r\n     }\r\n     .gouImg{\r\n       float: left;\r\n       margin-top: 0.04rem;\r\n     }\r\n     .gouImg2{\r\n       margin-left: 0.3rem;\r\n     }\r\n }\r\n .more2{\r\n    margin-top: 0.1rem !important;\r\n }\r\n  .more{\r\n       float: right;\r\n       margin-top: 0.2rem;\r\n     }\r\n .descript-sec{\r\n   width: 100%;\r\n   height: 0.6rem;\r\n   background-color: white;\r\n   margin-top: 0.12rem;\r\n   border-radius: 0.2rem;\r\n   .descript-sec-content{\r\n   width: 3.34rem;\r\n   height: 1.2rem;\r\n   margin: auto;\r\n   overflow: hidden;\r\n   .descript-sec-taocan{\r\n     width: 100%;\r\n     height: 0.55rem;\r\n     line-height: 0.55rem;\r\n   }\r\n   .descript-sec-maiduan{\r\n      width: 100%;\r\n     height: 0.65rem;\r\n     line-height: 0.65rem;\r\n   }\r\n   }\r\n }\r\n .descript-third{\r\n   width: 100%;\r\n   height: 1.06rem;\r\n   background-color: white;\r\n   margin-top: 0.12rem;\r\n  //  margin-bottom: 0.7rem;\r\n   border-radius: 0.2rem;\r\n   .descript-third-content{\r\n   width: 3.34rem;\r\n   height: 1.06rem;\r\n   margin: auto;\r\n   overflow: hidden;\r\n   .descript-third-choose{\r\n     width: 100%;\r\n     height: 0.53rem;\r\n     line-height: 0.53rem;\r\n   }\r\n    .descript-third-canshu{\r\n     width: 100%;\r\n     height: 0.53rem;\r\n     line-height: 0.53rem;\r\n   }\r\n   }\r\n }\r\n .van-goods-action-icon {\r\n    display: -webkit-box;\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    -webkit-box-orient: vertical;\r\n    -webkit-box-direction: normal;\r\n    -ms-flex-direction: column;\r\n    flex-direction: column;\r\n    -webkit-box-pack: center;\r\n    -ms-flex-pack: center;\r\n    justify-content: center;\r\n    min-width: 0.65rem;\r\n    height:0.5rem;\r\n    color: #7d7e80;\r\n    font-size:0.1rem;\r\n    line-height: 1;\r\n    text-align: center;\r\n    background-color: #fff;\r\n}\r\n.van-goods-action-button {\r\n    -webkit-box-flex: 1;\r\n    -ms-flex: 1;\r\n    flex: 1;\r\n    height: 0.5rem;\r\n    font-weight: 500;\r\n    font-size: 0.14rem;\r\n    line-height: 0.5rem;\r\n    border: 0;\r\n    border-radius: 0 !important;\r\n    background: -webkit-linear-gradient(to left, #D50000, #FD9A28) !important;\r\n    background: -o-linear-gradient(to left, #D50000, #FD9A28) !important;\r\n    background: -moz-linear-gradient(to left, #D50000, #FD9A28) !important;\r\n    background: linear-gradient(to left, #D50000, #FD9A28) !important;\r\n} \r\n\r\n.goods-right-picker {\r\n  display: none;\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  margin: auto;\r\n  z-index: 100;\r\n  max-width: 3.75rem;\r\n  background-color: hsla(0, 0%, 43.1%, 0.5);\r\n  .detail{\r\n    width: 100%;\r\n    height: 83%;\r\n    background: white;\r\n    position: relative;\r\n    top: 17%;\r\n    border-radius: 0.2rem 0.2rem 0 0;\r\n    overflow-y:scroll;\r\n    .detail-content{\r\n      width: 3.43rem;\r\n      margin: auto;\r\n      height: auto;\r\n      overflow: hidden;\r\n      .d-content-top{\r\n      margin-top: 0.2rem;\r\n      height: 1rem;\r\n         img{\r\n           width: 0.9rem;\r\n           height: 1rem;\r\n           float: left;\r\n         }\r\n         .quanxin{\r\n         background: -webkit-linear-gradient(to left, #D50000, #FD9A28) !important;\r\n         background: -o-linear-gradient(to left, #D50000, #FD9A28) !important;\r\n         background: -moz-linear-gradient(to left, #D50000, #FD9A28) !important;\r\n         background: linear-gradient(to left, #D50000, #FD9A28) !important;\r\n         }\r\n    .price-span{\r\n    display: block;\r\n    float: left;\r\n    font-size: 0.15rem;\r\n    font-family: 'DIN-Bold';\r\n    color: #B3381D;\r\n    font-weight: bold;\r\n    margin-top: 0.7rem;\r\n    margin-left: 0.25rem;\r\n    }\r\n    }\r\n      .d-content-color{\r\n        margin-top: 0.2rem;\r\n        height: auto;\r\n        p{\r\n          font-size: 0.13rem;\r\n          font-weight: bold;\r\n        }\r\n        ul{\r\n          .color-li{\r\n              float: left;\r\n              background: #F5F6FA;\r\n              color: #2F3031;\r\n              height: 0.31rem;\r\n              line-height: 0.31rem;\r\n              padding-left: 0.24rem;\r\n              padding-right: 0.24rem;\r\n              border-radius: 0.155rem;\r\n              font-size: 0.13rem;\r\n              margin-right: 0.15rem;\r\n              margin-top: 0.15rem;\r\n          }\r\n           .color-li:nth-child(4){\r\n             margin-right: 0;\r\n           }\r\n          .active{\r\n            background: #FD9828;\r\n          }\r\n        }\r\n      }\r\n      .d-content-color::after{\r\n              content:\" \";\r\n              display:block;\r\n              clear:both;\r\n              height:0; \r\n              overflow:hidden; visibility:hidden; \r\n      }\r\n      .d-content-spec{\r\n       height: auto;\r\n       margin-top: 0.15rem;\r\n         p{\r\n          font-size: 0.13rem;\r\n          font-weight: bold;\r\n        }\r\n        ul{\r\n          .spec-li{\r\n              float: left;\r\n              background: #F5F6FA;\r\n              color: #2F3031;\r\n             \r\n              line-height: 0.31rem;\r\n              padding-left: 0.24rem;\r\n              padding-right: 0.24rem;\r\n              border-radius: 0.155rem;\r\n              font-size: 0.13rem;\r\n              margin-left: 0.1rem;\r\n              margin-top: 0.15rem;\r\n          }\r\n          .activeSize{\r\n            background: #FD9828;\r\n          }\r\n          \r\n        }\r\n      }\r\n      .d-content-spec::after{\r\n              content:\" \";\r\n              display:block;\r\n              clear:both;\r\n              height:0; \r\n              overflow:hidden; visibility:hidden; \r\n      }\r\n      .d-content-day{\r\n        height: 0.9rem;\r\n        margin-top: 0.15rem;\r\n         p{\r\n          font-size: 0.13rem;\r\n          font-weight: bold;\r\n        }\r\n        ul{\r\n          .day-li{\r\n              float: left;\r\n              background: #F5F6FA;\r\n              color: #2F3031;\r\n              height: 0.31rem;\r\n              line-height: 0.31rem;\r\n              padding-left: 0.24rem;\r\n              padding-right: 0.24rem;\r\n              border-radius: 0.155rem;\r\n              font-size: 0.13rem;\r\n              margin-left: 0.1rem;\r\n              margin-right: 0.15rem;\r\n              margin-top: 0.15rem;\r\n          }\r\n          .active{\r\n             background: #FD9828;\r\n          }\r\n        }\r\n      }\r\n      .d-content-from{\r\n        height: 0.9rem;\r\n         p{\r\n          font-size: 0.13rem;\r\n          font-weight: bold;\r\n        }\r\n        ul{\r\n          .from-li{\r\n              float: left;\r\n              background: #F5F6FA;\r\n              color: #2F3031;\r\n              height: 0.31rem;\r\n              line-height: 0.31rem;\r\n              padding-left: 0.24rem;\r\n              padding-right: 0.24rem;\r\n              border-radius: 0.155rem;\r\n              font-size: 0.13rem;\r\n              margin-right: 0.15rem;\r\n              margin-top: 0.15rem;\r\n          }\r\n        }\r\n      }\r\n       .d-content-num{\r\n        height: 0.5rem;\r\n         p{\r\n          font-size: 0.13rem;\r\n          font-weight: bold;\r\n          float: left;\r\n        }\r\n    .van-stepper {\r\n    font-size: 0;\r\n    width: 1rem;\r\n    -ms-user-select: none;\r\n    user-select: none;\r\n    float: right !important;\r\n//     .van-stepper__input {\r\n//     -webkit-box-sizing: border-box;\r\n//     box-sizing: border-box;\r\n//     width: 0.42rem;\r\n//     height: 0.28rem;\r\n//     margin: 0 2px !important;\r\n//     padding: 0;\r\n//     color: #323233;\r\n//     font-size: 14px;\r\n//     text-align: center;\r\n//     vertical-align: middle;\r\n//     background-color: #f2f3f5;\r\n//     border: 0;\r\n//     border-width: 1px 0;\r\n//     border-radius: 0;\r\n//     -webkit-appearance: none;\r\n// }\r\n    .van-stepper__minus, .van-stepper__plus {\r\n    position: relative;\r\n    -webkit-box-sizing: border-box;\r\n    box-sizing: border-box;\r\n    width: 20px;\r\n    height: 28px;\r\n    margin: 0;\r\n    padding: 5px;\r\n    color: #323233;\r\n    vertical-align: middle;\r\n    background-color: white;\r\n    border: none;\r\n}\r\n.van-stepper__minus--disabled, .van-stepper__plus--disabled {\r\n    color: #c8c9cc;\r\n    background-color: white;\r\n}\r\n \r\n       }\r\n     \r\n       }\r\n         .d-content-sure{\r\n         width: 3.43rem;\r\n         height: 0.44rem;\r\n         text-align: center;\r\n         line-height: 0.44rem;\r\n          background: -webkit-linear-gradient(to left, #D50000, #FD9A28) !important;\r\n          background: -o-linear-gradient(to left, #D50000, #FD9A28) !important;\r\n         background: -moz-linear-gradient(to left, #D50000, #FD9A28) !important;\r\n         background: linear-gradient(to left, #D50000, #FD9A28) !important;\r\n         border-radius: 0.22rem;\r\n         color: white;\r\n       }\r\n    }\r\n  }\r\n}\r\n .bg_bottom{\r\n   width: 100%;\r\n   background: white;\r\n   margin-top: 0.12rem;\r\n   margin-bottom: 0.5rem;\r\n }\r\n\r\n  .bottom{\r\n    width: 3.43rem;\r\n    overflow: hidden;\r\n    margin: auto;\r\n  }\r\n  .bottom .bottom-title{\r\n    font-size: 0.13rem;\r\n    color: #EB5516;\r\n    font-weight: bold;\r\n    margin-top: 0.2rem;\r\n    height: 0.14rem;\r\n    line-height: 0.14rem;\r\n    border-left: 3px solid #EB5516;\r\n    padding-left: 0.05rem;\r\n  }\r\n  .bottom img{\r\n    width: 100%;\r\n    margin-top: 0.12rem;\r\n  }\r\n\r\n</style>"]}]}